<%- include('../includes/header', {title: "Tasks", navItemsPresent: false}); %>
    <%- include('../includes/sub-header'); %>
    <%- include('../dashboard/dashboard-sidebar',{role,activeLink}); %>
    <%- include("../section-template/top-section__template"); %>
    
    <div class="container py-5">
    <div class="row justify-content-center" id="task-leader--container">
      <div class="col-md-8 col-lg-6">
        <div class="card shadow-sm rounded-3">
          <div class="card-header bg-primary text-white">
            <h4 class="mb-0">Create a New Task</h4>
          </div>
          <div class="card-body">
            <form id="task-form" method="post" action="/task/task-creation">
                <input type="hidden" value="<%=locals.csrf%>" name="_csrf">
               <div class="mb-3">

               <%if(!projectDetails){%>
                
                <label for="project-options" class="form-label">Projects</label>
                <select name="project-options" class="form-select" id="project-options">
                  <option value="" selected disabled>Choose Project For The Task</option>
                  <% for (let i = 0; i < pageDetails.leaderProjects?.length; i++) { %>
                  <option value="<%=  pageDetails.leaderProjects[i]._id %>"><%=  pageDetails.leaderProjects[i].name %></option>
                  <% } %>
                </select>
               <%} else {%>
                  <input type="hidden" value="<%=projectDetails._id%>" name="project-options">
                  <p class="text-decoration-underline"><%= projectDetails.name %></p>
                <%} %>
              </div>
              <!-- Organization Select -->
               <% if(!orgDetails) {%>
               
                <% if(pageDetails?.leaderOrgs) {%>
                  <div class="mb-3">
                    <label for="organization-options" class="form-label">Organization</label>
                    <select name="organization-options" class="form-select" id="organization-options">
                      <option value="" selected disabled>Choose an organization</option>
                      <% for (let i = 0; i < pageDetails?.leaderOrgs?.length; i++) { %>
                      <option value="<%=  pageDetails.leaderOrgs[i]._id %>"><%=  pageDetails.leaderOrgs[i].name %></option>
                      <% } %>
                    </select>
                  </div>
                <% } %>
              
              <%} else {%>
                   <input type="hidden" value="<%=orgDetails._id%>" name="organization-options">
                  <p class="text-decoration-underline"><%= orgDetails.name %></p>
              <%} %>

              <% if(!usersDetails) {%>

                <% if(pageDetails?.memberList) {%>
                  <div class="mb-3">
                  <label for="member-options" class="form-label">Members</label>
                  <select name="member-options" class="form-select" id="member-options">
                    <option value="" selected disabled>Choose Member</option>
                    <% for (let i = 0; i < pageDetails?.memberList?.length; i++) { %>
                    <option value="<%= pageDetails?.memberList[i]?._id %>"> <%=pageDetails?.memberList[i]?.firstName + " " + pageDetails?.memberList[i]?.lastName %></option>
                    <% } %>
                  </select>
                </div>
                <% } %>

                
              <%} else {%>
                <input type="hidden" value="<%=usersDetails._id%>" name="member-options">
                  <p class="text-decoration-underline"><%= usersDetails.firstName + " " + usersDetails.lastName %></p>
              <% }%>

              <!-- Task Name -->
              <div class="mb-3">
                <label for="taskName" class="form-label">Task Name</label>
                <input type="text" class="form-control" id="taskName" placeholder="Enter task name" required>
              </div>

              <!-- Description -->
              <div class="mb-3">
                <label for="description" class="form-label">Task Description</label>
                <textarea class="form-control" id="description" rows="4" placeholder="Enter task description"></textarea>
              </div>

              <!-- Hours Required -->
              <div class="mb-3">
                <label for="hours" class="form-label">Hours Required</label>
                <input type="number" class="form-control" id="hours" min="1" placeholder="Enter number of hours" required>
              </div>

              <div class="mb-3">
                <label for="days" class="form-label">Hours Required</label>
                <input type="number" class="form-control" id="days" min="1" placeholder="Enter number of days" required>
              </div>

              <!-- Submit Button -->
              <div class="d-grid">
                <button type="submit" class="btn btn-primary">Create Task</button>
              </div>

            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</main>
    
<%- include('../includes/footer'); %>



